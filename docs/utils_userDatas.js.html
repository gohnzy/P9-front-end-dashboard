<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/userDatas.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/userDatas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import GET from '../API_Requests/API_Requests';

/**
 * @param {Number} id - id sent through 'fetchAllUserDatas' function and passed in class's methods
 * @returns {Promise&lt;Object>} all methods of 'ThisUser' class returns an object containing user's datas
 */

// Class used
class ThisUser {
	constructor() {
		this.userData = null;
		this.userActivities = null;
		this.userSessions = null;
		this.userPerformance = null;
	}

	// Ajout d'une méthode asynchrone distincte pour l'initialisation
	initialize = async id => {
		this.userData = await this.fetchUserDatas(id);
		this.userActivities = await this.fetchActivitiesDatas(id);
		this.userSessions = await this.fetchSessionsDatas(id);
		this.userPerformance = await this.fetchPerformanceDatas(id);
	};

	fetchUserDatas = async id => {
		try {
			const basicInfos = await GET(id, 'basicInfos');
			return basicInfos;
		} catch (error) {
			console.error('Error fetching user info:', error);
			return null;
		}
	};

	fetchActivitiesDatas = async id => {
		try {
			const activities = await GET(id, 'activities');
			return activities;
		} catch (error) {
			console.error('Error fetching user activities:', error);
			return null;
		}
	};

	fetchSessionsDatas = async id => {
		try {
			const sessions = await GET(id, 'sessions');
			return sessions;
		} catch (error) {
			console.error('Error fetching user sessions:', error);
			return null;
		}
	};

	fetchPerformanceDatas = async id => {
		try {
			const performance = await GET(id, 'performance');
			return performance;
		} catch (error) {
			console.error('Error fetching user performance:', error);
			return null;
		}
	};
}

// New class intialized and exported
/**
 *
 * @param {Number} id - sent through function's call
 * @returns {Promise&lt;Object>} datas - user's datas
 */
const fetchAllUserDatas = async id => {
	let datas;
	try {
		const userDatas = new ThisUser();
		await userDatas.initialize(id);
		datas = {
			user: userDatas.userData,
			activities: userDatas.userActivities,
			sessions: userDatas.userSessions,
			performance: userDatas.userPerformance,
		};
	} catch (error) {
		return (datas = 'error');
	}
	console.log(datas);
	return datas;
};

export default fetchAllUserDatas;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ThisUser.html">ThisUser</a></li></ul><h3>Global</h3><ul><li><a href="global.html#GET">GET</a></li><li><a href="global.html#fetchAllUserDatas">fetchAllUserDatas</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Tue Jul 23 2024 14:32:55 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
